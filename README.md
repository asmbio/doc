<!-- vscode-markdown-toc -->
* 1. [å®‰è£…ä¸‹è½½](#)
	* 1.1. [ä»æºç ç¼–è¯‘](#-1)
	* 1.2. [å‘½ä»¤è¡Œcli ç‰ˆæœ¬ å®‰è£…](#cli)
	* 1.3. [æ¡Œé¢ç‰ˆæœ¬ ç‰ˆæœ¬ å®‰è£…](#-1)
	* 1.4. [asmb ä½¿ç”¨è¯´æ˜](#asmb)
	* 1.5. [wallet ä½¿ç”¨è¯´æ˜](#wallet)
* 2. [å¦‚ä½•å¯åŠ¨ä¸€ä¸ªæœ¬åœ°åŒºå—é“¾ç½‘ç»œ](#-1)
* 3. [å¦‚ä½•å¯åŠ¨å®Œæ•´è§‚å¯Ÿé“¾](#-1)
* 4. [å¦‚ä½•å¯åŠ¨ä¸€ä¸ªç”Ÿäº§èŠ‚ç‚¹](#-1)
* 5. [å¦‚ä½•æ·»åŠ ä¸€ä¸ªå¤‡ç”¨æœåŠ¡å™¨èµ„æº](#-1)
* 6. [å¦‚ä½•å€Ÿç”¨è§‚å¯Ÿé“¾å¯åŠ¨ç‹¬ç«‹è¿ç®—é’±åŒ…](#-1)
* 7. [å¦‚ä½•å€Ÿç”¨è§‚å¯Ÿé“¾å¯åŠ¨è¿œç¨‹é’±åŒ…](#-1)

<!-- vscode-markdown-toc-config
	numbering=true
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->

# ASMBï¼ˆè‡ªåŠ¨ä¼¸ç¼©ç½‘çŠ¶åŒºå—é“¾ï¼‰

ASMBï¼ˆè‡ªåŠ¨ä¼¸ç¼©ç½‘çŠ¶åŒºå—é“¾ï¼‰ï¼Œé‡‡æ ·DPOS+ å…±è¯†ç®—æ³•åˆ†ç‰‡æŠ€æœ¯ç†è®ºä¸Šå®ç°è¶…äº¿çº§tpsï¼Œä¸Šä¸å°é¡¶ã€‚
å•è´¦å·æ¶ˆæ¯tpså¯è¾¾3000/sï¼Œä¸‹é¢æ˜¯æ›´è¯¦ç»†çš„æŠ€æœ¯å‚æ•°
- å¤š->å•ï¼šè¾“å‡ºç«¯æ¯ä¸ªè´¦å·1000/sï¼Œè¾“å…¥ç«¯æ¥æ”¶3000/s å·¦å³ï¼ŒäºŒæ¬¡åˆ†ç‰‡åå¯å®ç°å•è´¦å·æ— ä¸Šé™æ¥æ”¶é€Ÿåº¦
- å•->å¤šï¼šè¾“å‡ºç«¯3000/så·¦å³



##  1. <a name=''></a>å®‰è£…ä¸‹è½½
###  1.1. <a name='-1'></a>ä»æºç ç¼–è¯‘
- ç¼–è¯‘  go build
- //+debug ã€Šè¯¥æ³¨é‡Šä¸‹å†…å®¹é€»è¾‘æ— å…³ï¼Œå¯ä»¥æ³¨é‡Šæ‰ï¼Œæé«˜æ€§èƒ½

###  1.2. <a name='cli'></a>å‘½ä»¤è¡Œcli ç‰ˆæœ¬ å®‰è£…
ä¸‹è½½åœ°å€:[github.com/asmbio/doc/releases/](https://github.com/asmbio/doc/releases/)
1. windows å®‰è£…
    ä»ä¸Šé¢åœ°å€é€‰æ‹©ç›¸åº”çš„ç‰ˆæœ¬åï¼Œå°†ä¸‹è½½åçš„æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ¯”å¦‚C:\asmb\mywallet> , ç„¶åæ‰“å¼€å‘½ä»¤è¡Œï¼Œå³å¯æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–è€…è®¾ç½®ä¸€ä¸‹windows ç¯å¢ƒå˜é‡æ›´åŠ æ–¹ä¾¿
    ```
    ./wallet -h
    ```
   
2. Ubuntu å®‰è£…



###  1.3. <a name='-1'></a>æ¡Œé¢ç‰ˆæœ¬ ç‰ˆæœ¬ å®‰è£…


1.  ä¸‹è½½
3.  xxxx



###  1.4. <a name='asmb'></a>asmb ä½¿ç”¨è¯´æ˜

```
asmb -h
```


###  1.5. <a name='wallet'></a>wallet ä½¿ç”¨è¯´æ˜

```
wallet -h
```

##  2. <a name='-1'></a>å¦‚ä½•å¯åŠ¨ä¸€ä¸ªæœ¬åœ°åŒºå—é“¾ç½‘ç»œ

ç¡¬ç¼–ç æµ‹è¯•é“¾å‚æ•°

ä»¥ä¸‹å‚æ•°ï¼Œç›¸åŒçš„åŒºå—é“¾ç½‘ç»œè¦ä¿æŒä¸€è‡´ï¼Œä¸ç„¶ä¼šå‡ºç°ä¸åŒçš„åˆ†å‰
```
const ASMB_ID = "0" // æœ¬åœ°æµ‹è¯•é“¾0, æµ‹è¯•é“¾1ï¼Œä¸»é“¾2,ä¸ªäººæµ‹è¯•é€‰æ‹©å…¶ä»–idï¼Œé˜²æ­¢é‡å¤
const Chainid = 0   //åŒºå—é“¾id ä¸ä¸Šé¢ç›¸åŒ ç±»å‹ä¸åŒ

//const RAFT_LVLDB_SMSGS = "asmb/smsgs/" //åŒºå—åˆ†ç‰‡massagemanager,å…¶ä»–åˆ†ç‰‡çš„æ•°æ®
const DefaultGenesisAccountNum = 100 // é‡æ–°ç”Ÿæˆ genesis config æ—¶ä½¿ç”¨
const Producer_n = 3                 // DOPS+ è¶…çº§èŠ‚ç‚¹æ€»æ•°é‡è½®æµå‡ºå—ï¼Œä¸»ç½‘ è®¾ç½®ä¸º21+
const Minfork = Producer_n           // æœ€å°è¿ç»­å‡ºå—ï¼ˆåˆ†å‰ï¼Œæ‹†åˆå¹³å‡ç»Ÿè®¡å‘¨æœŸï¼‰
const Forkcountdown = 3              // å€’è®¡æ—¶åŒºå—æ•°ï¼Œå‡†å¤‡æ–°çš„ç‰‡æ¥å£æœåŠ¡

const BLOCK_OUT_TIME = 20 //å‡ºå—ç­‰å¾…è¶…æ—¶æ—¶é—´,å¯¹åº”å½“å‰ç”Ÿäº§è€…æœ€é•¿å‡ºå—æ—¶é—´ åœ¨ BLOCK_OUT_TIME/2 å·¦å³
// Height%Producer_n == ç”Ÿäº§è€…æ’å-1 æ—¶å‡ºå—ï¼Œæ‰€ä»¥åˆ›ä¸–å— ä»¥åä» æ’åäºŒç”Ÿäº§è€…å‡ºå—

const Maxblocksize = 1024 * 2                     // æœ€å¤§åŒºå—å¤§å°  æ­£å¸¸è®¾ç½®å€¼:1024  * 500 (bit byte ;1024 å­—èŠ‚ å¤§çº¦æ˜¯6ä¸ªmsg å¤§å°
const Splitpercentage = 0.60                      // åˆ†å‰ ç™¾åˆ†æ¯”ï¼ˆè¿ç»­å‡ºå—å¤§å°å¹³å‡å¤§äº Maxblocksize*Splitpercentage åˆ†æ‹†æˆä¸¤ä¸ª
const Mergepercentage = Splitpercentage / 10 * 4  // æ‹†åˆ ç™¾åˆ†æ¯” ï¼Œæ‹†æ ¹æ®æƒ…å†µå°†åˆ†ç‰‡åŒºé—´æŒ‰ç…§å¹³å‡ä¸­ä½æ•° æ‹†åˆ°å·¦å³åˆ†ç‰‡
const Emptyypercentage = Splitpercentage / 10 * 5 // è¡¥å……åŒºå—åŒºå—å¤§å° (å¿…é¡»åœ¨åˆ†å‰ç™¾åˆ†æ¯”å’Œåˆå¹¶ç™¾åˆ†æ¯”ä¹‹é—´)

```

```
const MINER_CHAN_NUM = 10 // å¤„ç†æ¶ˆæ¯åç¨‹æ•°é‡ï¼ˆæ ¹æ®æœåŠ¡å™¨èŠ‚ç‚¹æ€§èƒ½æ¥é…ç½®
```

é…ç½®etcd é›†ç¾¤
[https://gitee.com/asmb/doc/blob/master/etcd.md](https://github.com/asmbio/doc/blob/master/etcd.md)]

åˆå§‹åŒ–ä»“åº“,å¦‚æœä½ æ‹¥æœ‰æ‰€æœ‰åˆ›ä¸–ç”Ÿäº§è€…å¯†é’¥ï¼Œåªéœ€è¦å¼€å¯ä¸€ä¸ªnodeï¼Œå¦‚æœåˆ›ä¸–è€…æœ‰å¤šä¸ªï¼Œç”±ä¸åŒçš„åˆ›ä¸–è€…åˆ†åˆ«å¼€å¯,æ¯ä¸ªå®Œæˆnodeå¿…é¡»ç»´æŠ¤ä¸€ä¸ªå•ç‹¬etcd åˆ†ç‰‡ç®¡ç†é›†ç¾¤
```
mkdir node1
cd node1
node1$ ./asmb init 
mkdir node2
cd node2
node2$ ./asmb init 
```
å¯¼å…¥å¯†é’¥
```
# export.w åŒ…å«åŠ å¯†åçš„å¯†é’¥æ•°æ®
wallet import -hkey export.w
```

æ‹·è´ä¿®æ”¹é…ç½®æ–‡ä»¶ asmbcfgï¼Œå°†ä¸‹é¢å­—æ®µä¿®æ”¹æˆå¤–ç½‘å¯è®¿é—®çš„ipå’Œç«¯å£ï¼Œå°† FullapilistConfig ä¿®æ”¹æˆè‡ªå·±çš„etcdé›†ç¾¤

```
"Rpcclientaddr": "asmb.site:8106"
"FullapilistConfig": {
		"MinersliceAeskey": "eyJhbGciOiJIUzI1eyJhbGciOiJIUzI1", //åˆ†ç‰‡ç®¡ç†åŠ å¯†ç§˜é’¥ï¼Œç”¨äºè§£æåˆ†ç‰‡æœåŠ¡ tokenï¼Œæ‹¥æœ‰è¯¥ç§˜é’¥æ‰èƒ½è®¿é—®etcd æ³¨å†Œçš„èŠ‚ç‚¹æœåŠ¡
		"MinersliceNet": "mountain",
		"Endpoints": [
			"127.0.0.1:2379"									// Endpoints
		],
		"Username": "xxx",										// è¯»å†™æƒé™ç”¨æˆ·å¯†ç 
		"Password": "xxxxxx"
	},
``` 


æ‹·è´åˆ›ä¸–æ–‡ä»¶ Genesis
```
cp ../asmb/Genesis Genesis
```

åˆ›å»ºç¬¬ä¸€ä¸ªåˆ›ä¸–å— 
```
node1$ ./asmb genesis

node2$ asmb genesis -block Qmcmksga4noMXmE7Wa9gShPFWW53xXyY1sVaWNcXqtWGLp
```

åˆ›ä¸–æ—·å·¥å¼€å¯ ./asmb genesisminer

å¯åŠ¨èŠ‚ç‚¹1
```
# asmb genesisminer é»˜è®¤åŠ è½½æ‰€æœ‰ç”Ÿäº§è€…ï¼Œå¦‚æœä½ å¯¼å…¥äº†æ‰€æœ‰ç”Ÿäº§è€…å¯†é’¥çš„è¯ï¼Œä¸ç„¶ä¼šæŠ¥é”™è¯¯ï¼Œæ— æ³•ç­¾å
node1$ asmb genesisminer -miners 2YK3vbyZtstMS4ajXPxZhwksZDbv -rank 2
```
å¯åŠ¨èŠ‚ç‚¹2
```
node2$ asmb genesisminer -miners CkPw1fzw3tgN6t8NFRuP1hHnSw7 -miners 492xZNKN8FdH9NF3gUWX8A1iHbVj  -rank 0 -rank 1
```



##  3. <a name='-1'></a>å¦‚ä½•å¯åŠ¨å®Œæ•´è§‚å¯Ÿé“¾

etcd æœåŠ¡å¯åŠ¨
```
# å‚è€ƒ å¦‚ä½•å¯åŠ¨ä¸€ä¸ªæœ¬åœ°åŒºå—é“¾ç½‘ç»œ
```
åˆå§‹åŒ–ä»“åº“
```
mkdir node1
cd node1
node1$ ./asmb init 
```
ä¿®æ”¹é…ç½®æ–‡ä»¶
```
# å‚è€ƒ å¦‚ä½•å¯åŠ¨ä¸€ä¸ªæœ¬åœ°åŒºå—é“¾ç½‘ç»œ
```
å¯åŠ¨ç©ºèŠ‚ç‚¹

```
# ç©ºèŠ‚ç‚¹æ•°é‡*æ¯ä¸ªèŠ‚ç‚¹æœ€å¤§åˆ†ç‰‡æ•°é‡ï¼Œå¿…é¡»å¤§äºä½ è¦è§‚å¯Ÿçš„åŒºå—é“¾ç½‘ç»œçš„åˆ†ç‰‡æ•°é‡ï¼Œä¸ç„¶ä¼šå‡ºç°èµ„æºä¸è¶³çš„æƒ…å†µ
# ç”±äºæ˜¯è§‚å¯Ÿé“¾ï¼Œä¸éœ€è¦ç”Ÿäº§è€…å¯†é’¥ï¼Œè®¾ç½®ä¸€ä¸ªä¸å­˜åœ¨çš„ç”Ÿäº§è€…
asmb node addnode -miners ttt -rank 99999
```
æŒ‰ç…§ä¸Šé¢æ­¥éª¤å¯åŠ¨è¶³å¤Ÿå¤šçš„ç©ºèŠ‚ç‚¹ï¼Œç„¶ååœ¨æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œé…ç½®å¥½å‚æ•°åï¼Œå…ˆä¸è¦å¯åŠ¨ï¼Œæ‰§è¡Œä»¥ä¸‹åŒæ­¥å‘½ä»¤

å¼€å¯åŒæ­¥
```

# -syncpoints æ˜¯è¿œç¨‹etcdåˆ†ç‰‡æœåŠ¡å™¨èŠ‚ç‚¹
cd node99
# è¯¥æ–‡ä»¶ä¸‹å¿…é¡»æœ‰é…ç½®æ–‡ä»¶ 
asmb node sync -syncpoints asmb.site:2379 
```
æ‰§è¡ŒæˆåŠŸå,ç©ºèŠ‚ç‚¹æ¥æ”¶åˆ°å‘½ä»¤ä¼šå¼€å§‹åŒæ­¥æœ€æ–°åŒºå—
```
2022-06-18T18:19:34.230+0800    [34mINFO[0m   asmb    chain/minerbs_sample.go:229     å¼€å§‹å‡ºå—-4ZrjxJnU1LA5xSyrWMNuXTvSYKwt
2022-06-18T18:19:34.230+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10557-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å‡ºå—......
2022-06-18T18:19:34.231+0800    [34mINFO[0m   asmb    chain/chain_handmessge.go:141   Subscribe:asmb/0/msg/4ZrjxJnU1LA5xSyrWMNuXTvSYKwt
2022-06-18T18:19:34.231+0800    [34mINFO[0m   asmb    chain/chain_handmessge.go:182   Subscribe:asmb/0/chain/4ZrjxJnU1LA5xSyrWMNuXTvSYKwt
2022-06-18T18:19:39.158+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10558-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
2022-06-18T18:19:39.340+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10559-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å‡ºå—......
2022-06-18T18:19:49.989+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10560-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å‡ºå—......
2022-06-18T18:20:00.810+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10561-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å‡ºå—......
2022-06-18T18:20:11.872+0800    [35mDEBUG[0m  asmb    chain/ptl_mergeforking.go:746   RqParentHash sucss :10562-[255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255]
ç­‰å¾…å…¶ä»–èŠ‚ç‚¹å‡ºå—......
```
æœ€åå¯åŠ¨ç©ºèŠ‚ç‚¹å¤‡ç”¨ï¼Œ
```
# å¦‚æœåŒºå—ç»§ç»­æ‰©å¤§åˆ†ç‰‡ï¼Œä¼šåœ¨è¯¥èŠ‚ç‚¹ä¸Šè‡ªåŠ¨åŠ è½½åˆ†ç‰‡
asmb node sync -syncpoints asmb.site:2379 
```
##  4. <a name='-1'></a>å¦‚ä½•å¯åŠ¨ä¸€ä¸ªç”Ÿäº§èŠ‚ç‚¹
å¦‚æœæ˜¯åˆ›ä¸–æ—¶æœŸï¼Œå¿…é¡»æ‹¥æœ‰Genesis åˆ›ä¸–è€…å¯†é’¥æ‰èƒ½å¯åŠ¨ç”Ÿäº§èŠ‚ç‚¹

æ­£å¸¸ç”Ÿäº§èŠ‚ç‚¹åœ¨è·å¾—æŠ•ç¥¨æ’åä¹‹å‰å¤„äºè§‚å¯ŸçŠ¶æ€ï¼Œæ’åæ›´æ–°åè‡ªåŠ¨å¼€å§‹ç”Ÿäº§

##  5. <a name='-1'></a>å¦‚ä½•æ·»åŠ ä¸€ä¸ªå¤‡ç”¨æœåŠ¡å™¨èµ„æº
é…ç½®etcd é›†ç¾¤
[https://gitee.com/asmb/doc/blob/master/etcd.md](https://github.com/asmbio/doc/blob/master/etcd.md)]

åˆå§‹åŒ–èŠ‚ç‚¹æ–‡ä»¶å¤¹
```
mkdir node1
cd node1
asmb init
mkdir lcdb
cd lcdb
wallet init
```

å¯¼å…¥ç”Ÿäº§è€…ç§˜é’¥ 

```
wallet import -khex export.w
```

æ‹·è´ä¿®æ”¹é…ç½®æ–‡ä»¶ asmbcfgï¼Œå°†ä¸‹é¢å­—æ®µä¿®æ”¹æˆå¤–ç½‘å¯è®¿é—®çš„ipå’Œç«¯å£

```
"Rpcclientaddr": "asmb.site:8106"
``` 

æ‹·è´åˆ›ä¸–æ–‡ä»¶ Genesis
```
cp ../asmb/Genesis Genesis
```

å¯åŠ¨èŠ‚ç‚¹

```
asmb genesisminer

```

##  6. <a name='-1'></a>å¦‚ä½•å€Ÿç”¨è§‚å¯Ÿé“¾å¯åŠ¨ç‹¬ç«‹è¿ç®—é’±åŒ…
##  7. <a name='-1'></a>å¦‚ä½•å€Ÿç”¨è§‚å¯Ÿé“¾å¯åŠ¨è¿œç¨‹é’±åŒ…

æ— è®ºé‚£ç§æƒ…å†µå¯åŠ¨é’±åŒ…walletï¼Œç§˜é’¥éƒ½åœ¨æœ¬åœ°åŠ å¯†ç®¡ç†ï¼Œå¦‚æœæœ¬åœ°è®¾å¤‡æŸåæˆ–è€…ä¸¢å¤±ï¼Œç§˜é’¥ä¹Ÿä¼šä¸¢å¤±æ— æ³•æ‰¾å›


ä¸‹è½½åœ°å€ 


